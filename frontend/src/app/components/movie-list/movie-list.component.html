<section class="netflix-browse">
    <!-- Hero Banner -->
    <div class="hero-banner" *ngIf="!loading && !error && featuredMovies.length > 0">
        <div class="hero-content">
            <div class="container">
                <div class="hero-details"
                    [ngClass]="{'slide-in-left': slidingDirection === 'left' && animating, 'slide-in-right': slidingDirection === 'right' && animating}">
                    <h1 class="hero-title">{{ getCurrentFeaturedMovie().title }}</h1>
                    <div class="hero-meta">
                        <span class="hero-year">{{ getCurrentFeaturedMovie().releaseYear }}</span>
                        <span class="hero-rating">{{ getCurrentFeaturedMovie().rating }}/10</span>
                        <span class="hero-duration">{{ getCurrentFeaturedMovie().duration }} min</span>
                    </div>
                    <p class="hero-description">{{ getCurrentFeaturedMovie().description }}</p>
                    <div class="hero-genres">
                        <span *ngFor="let genre of getCurrentFeaturedMovie().genre" class="hero-genre-badge">{{ genre
                            }}</span>
                    </div>
                    <div class="hero-actions">
                        <a [routerLink]="['/movies', getCurrentFeaturedMovie().id, 'play']"
                            class="btn btn-netflix-play">
                            <i class="bi bi-play-fill"></i> Play
                        </a>
                        <a [routerLink]="['/movies', getCurrentFeaturedMovie().id]" class="btn btn-netflix-more">
                            <i class="bi bi-info-circle"></i> More Info
                        </a>
                    </div>
                </div>
            </div>
            <div class="hero-overlay"></div>
            <div class="hero-image"
                [ngClass]="{'slide-bg-left': slidingDirection === 'left' && animating, 'slide-bg-right': slidingDirection === 'right' && animating}"
                [style.background-image]="'url(' + getCurrentFeaturedMovie().posterUrl + ')'"></div>


        </div>
    </div>


    <div class="container pb-5">
        <!-- Page Title and Add Button -->
        <div class="d-flex justify-content-between align-items-center mb-4 mt-4">
            <h2 class="section-title">All Movies</h2>
            <a routerLink="/movies/new" class="btn btn-netflix-add">
                <i class="bi bi-plus-lg me-2"></i>Add New Movie
            </a>
        </div>

        <!-- Loading State -->
        <div *ngIf="loading" class="netflix-loader">
            <div class="spinner">
                <div class="bounce1"></div>
                <div class="bounce2"></div>
                <div class="bounce3"></div>
            </div>
            <p>Loading movies...</p>
        </div>

        <!-- Error State -->
        <div *ngIf="error" class="alert alert-danger">
            <i class="bi bi-exclamation-triangle me-2"></i>
            Failed to load movies. Please try again later.
        </div>

        <!-- Empty State -->
        <div *ngIf="!loading && !error && movies.length === 0" class="empty-state">
            <i class="bi bi-film"></i>
            <h3>No movies available</h3>
            <p>Add your first movie to get started!</p>
            <a routerLink="/movies/new" class="btn btn-netflix-add mt-3">Add Movie</a>
        </div>

        <!-- Movies Grid -->
        <div *ngIf="!loading && !error && movies.length > 0" class="netflix-movies-grid mb-5">
            <div *ngFor="let movie of movies" class="netflix-movie-item">
                <div class="netflix-movie-card">
                    <div class="movie-poster">
                        <img [src]="movie.posterUrl" [alt]="movie.title + ' poster'">
                        <div class="movie-rating">{{ movie.rating }}</div>
                        <div class="movie-release-badge" *ngIf="movie.releaseDate === null">COMING SOON</div>
                    </div>
                    <div class="movie-details">
                        <h3 class="movie-title">{{ movie.title }}</h3>
                        <div class="movie-meta">
                            <span class="movie-year">{{ movie.releaseYear }}</span>
                            <span class="movie-duration">{{ movie.duration }} min</span>
                        </div>

                        <!-- Content only visible on hover -->
                        <div class="hover-content">
                            <p class="movie-release-date">{{ movie.releaseDate }}</p>
                            <div class="movie-genres">
                                <span *ngFor="let genre of movie.genre" class="genre-badge">{{ genre }}</span>
                            </div>
                            <p class="movie-description">{{ movie.description }}</p>
                        </div>
                    </div>

                    <!-- Movie actions as footer -->
                    <div class="movie-actions">
                        <a [routerLink]="['/movies', movie.id, 'play']" class="btn-action btn-play" title="Play">
                            <i class="bi bi-play-fill"></i>
                        </a>
                        <a [routerLink]="['/movies', movie.id]" class="btn-action btn-info" title="More Info">
                            <i class="bi bi-info-circle"></i>
                        </a>
                        <a [routerLink]="['/movies', movie.id, 'edit']" class="btn-action btn-edit" title="Edit">
                            <i class="bi bi-pencil"></i>
                        </a>
                        <button (click)="confirmDelete(movie)" class="btn-action btn-delete" title="Delete">
                            <i class="bi bi-trash"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Delete Confirmation Modal -->
    <app-confirmation-modal [showModal]="showDeleteModal" title="Delete Movie"
        message="Are you sure you want to delete this movie?" (confirm)="deleteMovie()" (cancel)="cancelDelete()">
    </app-confirmation-modal>
</section>