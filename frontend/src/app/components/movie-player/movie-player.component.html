<div class="netflix-player fade-in">
    <!-- Loading State -->
    <div *ngIf="loading" class="netflix-loader">
        <div class="spinner">
            <div class="bounce1"></div>
            <div class="bounce2"></div>
            <div class="bounce3"></div>
        </div>
        <p>Loading video player...</p>
    </div>

    <!-- Error State -->
    <div *ngIf="error" class="alert alert-danger error-container">
        <i class="bi bi-exclamation-triangle me-2"></i>
        Failed to load the movie for playback. The movie might not exist or there was a server error.
        <div class="mt-3">
            <button (click)="goBack()" class="btn btn-outline-light">
                <i class="bi bi-arrow-left me-2"></i>Go Back
            </button>
        </div>
    </div>

    <!-- Video Player -->
    <div *ngIf="!loading && !error && movie" class="player-container">
        <div class="player-header">
            <button (click)="goBack()" class="back-button">
                <i class="bi bi-arrow-left"></i>
            </button>
            <div class="movie-info-mini">
                <h1 class="playing-title">{{ movie.title }}</h1>
            </div>
        </div>

        <div class="video-container">
            <div class="netflix-theater-mode">
                <!-- Demo Video Player -->
                <div class="netflix-video-player">
                    <div class="demo-player">
                        <i class="bi bi-film player-icon"></i>
                        <div class="player-content">
                            <h2>{{ movie.title }}</h2>
                            <p class="player-meta">{{ movie.releaseYear }} | {{ movie.duration }} min</p>
                        </div>

                        <div class="player-controls-container">
                            <div class="player-progress">
                                <div class="progress-bar-container">
                                    <div class="progress-bar-bg"></div>
                                    <div class="progress-bar-fill" style="width: 25%;"></div>
                                    <div class="progress-bar-hover" style="width: 35%;"></div>
                                </div>
                                <div class="time-display">00:15 / 01:01</div>
                            </div>

                            <div class="player-controls">
                                <div class="controls-left">
                                    <button class="control-button"><i class="bi bi-play-fill"></i></button>
                                    <button class="control-button"><i class="bi bi-pause-fill"></i></button>
                                    <button class="control-button"><i class="bi bi-skip-backward-fill"></i></button>
                                    <button class="control-button"><i class="bi bi-skip-forward-fill"></i></button>
                                    <div class="volume-control">
                                        <button class="control-button"><i class="bi bi-volume-up-fill"></i></button>
                                        <div class="volume-slider-container">
                                            <div class="volume-slider">
                                                <div class="volume-fill" style="width: 80%;"></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="controls-right">
                                    <button class="control-button"><i class="bi bi-badge-cc-fill"></i></button>
                                    <button class="control-button"><i class="bi bi-gear-fill"></i></button>
                                    <button class="control-button"><i class="bi bi-arrows-fullscreen"></i></button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="container mt-4">
            <div class="now-playing-info">
                <div class="row">
                    <div class="col-md-8">
                        <h2 class="playing-title-full">{{ movie.title }} <span class="playing-year">({{
                                movie.releaseYear }})</span></h2>
                        <div class="movie-metadata">
                            <span class="release-date">{{ movie.releaseDate }}</span>
                            <span class="separator">•</span>
                            <span class="duration">{{ movie.duration }} min</span>
                            <span class="separator">•</span>
                            <span class="rating">{{ movie.rating }}/10</span>
                        </div>
                        <div class="genres-container">
                            <span *ngFor="let genre of movie.genre" class="genre-pill">{{ genre }}</span>
                        </div>
                        <p class="synopsis">{{ movie.description }}</p>
                        <p class="director"><strong>Director:</strong> {{ movie.director }}</p>
                    </div>
                    <div class="col-md-4">
                        <div class="poster-thumbnail">
                            <img [src]="movie.posterUrl" [alt]="movie.title + ' poster'" class="img-fluid rounded">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>